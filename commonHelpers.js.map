{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport axios from 'axios';\n\nlet currentPage = 1;\nlet currentQuery = '';\nexport async function someFunction() {\n  const searchForm = document.getElementById('searchForm');\n  const searchInput = document.getElementById('searchInput');\n  const loader = document.getElementById('loader');\n  const gallery = document.getElementById('gallery');\n  const loadMoreBtn = document.getElementById('loadMoreBtn');\n  const endMessage = document.getElementById('endMessage');\n\n  const lightbox = new SimpleLightbox('.gallery a');\n\n  searchForm.addEventListener('submit', async function (event) {\n    event.preventDefault();\n    const query = searchInput.value.trim();\n    if (query === '') {\n      iziToast.error({\n        title: 'Error',\n        message: 'Please enter a search query',\n      });\n      return;\n    }\n    loader.style.display = 'block';\n    gallery.innerHTML = '';\n    loadMoreBtn.style.display = 'none';\n    endMessage.style.display = 'none';\n    currentQuery = query;\n    currentPage = 1; // Reset page number for new search\n    try {\n      const data = await fetchImages(currentQuery, currentPage);\n      handleImageData(data);\n    } catch (error) {\n      loader.style.display = 'none';\n      iziToast.error({\n        title: 'Error',\n        message: error.message,\n      });\n    }\n  });\n\n  loadMoreBtn.addEventListener('click', async function () {\n    currentPage++;\n    try {\n      const data = await fetchImages(currentQuery, currentPage);\n      handleImageData(data);\n      smoothScroll(); // Smooth scroll after loading more images\n    } catch (error) {\n      iziToast.error({\n        title: 'Error',\n        message: error.message,\n      });\n    }\n  });\n\n  async function fetchImages(query, page) {\n    const apiKey = '42375067-5abc1b4a099550ffbb458c60e';\n    const perPage = 15;\n    const url = `https://pixabay.com/api/?key=${apiKey}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n    try {\n      const response = await axios.get(url);\n      if (response.status !== 200) {\n        throw new Error('Network response was not ok');\n      }\n      return response.data;\n    } catch (error) {\n      throw new Error(error.response.data.message || error.message);\n    }\n  }\n\n  function handleImageData(data) {\n    loader.style.display = 'none';\n    if (data.hits.length === 0) {\n      iziToast.info({\n        title: 'Info',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n    } else {\n      showImages(data.hits);\n      if (data.totalHits <= currentPage * 15) {\n        loadMoreBtn.style.display = 'none';\n        endMessage.style.display = 'block';\n      } else {\n        loadMoreBtn.style.display = 'block';\n        endMessage.style.display = 'none';\n      }\n    }\n  }\n\n  function showImages(images) {\n    const galleryContent = images\n      .map(\n        image => `\n        <a href=\"${image.largeImageURL}\" data-lightbox=\"gallery\">\n          <img src=\"${image.webformatURL}\" alt=\"${image.tags}\">\n        </a>\n      `\n      )\n      .join('');\n    gallery.innerHTML += galleryContent;\n\n    lightbox.refresh();\n  }\n\n  function smoothScroll() {\n    const cardHeight = gallery\n      .querySelector('a')\n      .getBoundingClientRect().height;\n    window.scrollBy({\n      top: cardHeight * 2, // Scroll down by two card heights\n      behavior: 'smooth', // Smooth scrolling animation\n    });\n  }\n}\n\nsomeFunction();\n"],"names":["currentPage","currentQuery","someFunction","searchForm","searchInput","loader","gallery","loadMoreBtn","endMessage","lightbox","SimpleLightbox","event","query","iziToast","data","fetchImages","handleImageData","error","smoothScroll","page","url","response","axios","showImages","images","galleryContent","image","cardHeight"],"mappings":"owBAMA,IAAIA,EAAc,EACdC,EAAe,GACZ,eAAeC,GAAe,CACnC,MAAMC,EAAa,SAAS,eAAe,YAAY,EACjDC,EAAc,SAAS,eAAe,aAAa,EACnDC,EAAS,SAAS,eAAe,QAAQ,EACzCC,EAAU,SAAS,eAAe,SAAS,EAC3CC,EAAc,SAAS,eAAe,aAAa,EACnDC,EAAa,SAAS,eAAe,YAAY,EAEjDC,EAAW,IAAIC,EAAe,YAAY,EAEhDP,EAAW,iBAAiB,SAAU,eAAgBQ,EAAO,CAC3DA,EAAM,eAAc,EACpB,MAAMC,EAAQR,EAAY,MAAM,KAAI,EACpC,GAAIQ,IAAU,GAAI,CAChBC,EAAS,MAAM,CACb,MAAO,QACP,QAAS,6BACjB,CAAO,EACD,MACD,CACDR,EAAO,MAAM,QAAU,QACvBC,EAAQ,UAAY,GACpBC,EAAY,MAAM,QAAU,OAC5BC,EAAW,MAAM,QAAU,OAC3BP,EAAeW,EACfZ,EAAc,EACd,GAAI,CACF,MAAMc,EAAO,MAAMC,EAAYd,EAAcD,CAAW,EACxDgB,EAAgBF,CAAI,CACrB,OAAQG,EAAO,CACdZ,EAAO,MAAM,QAAU,OACvBQ,EAAS,MAAM,CACb,MAAO,QACP,QAASI,EAAM,OACvB,CAAO,CACF,CACL,CAAG,EAEDV,EAAY,iBAAiB,QAAS,gBAAkB,CACtDP,IACA,GAAI,CACF,MAAMc,EAAO,MAAMC,EAAYd,EAAcD,CAAW,EACxDgB,EAAgBF,CAAI,EACpBI,GACD,OAAQD,EAAO,CACdJ,EAAS,MAAM,CACb,MAAO,QACP,QAASI,EAAM,OACvB,CAAO,CACF,CACL,CAAG,EAED,eAAeF,EAAYH,EAAOO,EAAM,CAGtC,MAAMC,EAAM,qEAA4CR,CAAK,iEAAiEO,CAAI,eAClI,GAAI,CACF,MAAME,EAAW,MAAMC,EAAM,IAAIF,CAAG,EACpC,GAAIC,EAAS,SAAW,IACtB,MAAM,IAAI,MAAM,6BAA6B,EAE/C,OAAOA,EAAS,IACjB,OAAQJ,EAAO,CACd,MAAM,IAAI,MAAMA,EAAM,SAAS,KAAK,SAAWA,EAAM,OAAO,CAC7D,CACF,CAED,SAASD,EAAgBF,EAAM,CAC7BT,EAAO,MAAM,QAAU,OACnBS,EAAK,KAAK,SAAW,EACvBD,EAAS,KAAK,CACZ,MAAO,OACP,QACE,0EACV,CAAO,GAEDU,EAAWT,EAAK,IAAI,EAChBA,EAAK,WAAad,EAAc,IAClCO,EAAY,MAAM,QAAU,OAC5BC,EAAW,MAAM,QAAU,UAE3BD,EAAY,MAAM,QAAU,QAC5BC,EAAW,MAAM,QAAU,QAGhC,CAED,SAASe,EAAWC,EAAQ,CAC1B,MAAMC,EAAiBD,EACpB,IACCE,GAAS;AAAA,mBACEA,EAAM,aAAa;AAAA,sBAChBA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA,OAGrD,EACA,KAAK,EAAE,EACVpB,EAAQ,WAAamB,EAErBhB,EAAS,QAAO,CACjB,CAED,SAASS,GAAe,CACtB,MAAMS,EAAarB,EAChB,cAAc,GAAG,EACjB,sBAAqB,EAAG,OAC3B,OAAO,SAAS,CACd,IAAKqB,EAAa,EAClB,SAAU,QAChB,CAAK,CACF,CACH,CAEAzB,EAAc"}